---
import Layout from "./Layout.astro";
import NavCard from "../components/NavCard.astro";
const { frontmatter } = Astro.props;
const allBlogs = await Astro.glob("../pages/blog/*.mdx");
let previousBlogObj: any = {};
let nextBlogObj: any = {};
allBlogs.forEach((blog, i) => {
    if (frontmatter.title === blog.frontmatter.title) {
        previousBlogObj = allBlogs[i - 1];
        nextBlogObj = allBlogs[i + 1];
    }
});
---

<Layout title={frontmatter.title} description={frontmatter.description}>
    <img src={frontmatter.image ?? "/img/blog.svg"} />
    <slot />
    <hr />
    <ul>
        {
            nextBlogObj && (
                <NavCard
                    cardURL={nextBlogObj.url}
                    cardHeading={"Next Blog: " + nextBlogObj.frontmatter.title}
                    cardDescription={nextBlogObj.frontmatter.description}
                    cardImage={nextBlogObj.frontmatter.image}
                />
            )
        }
        {
            previousBlogObj && (
                <NavCard
                    cardURL={previousBlogObj.url}
                    cardHeading={
                        "Previous Blog: " + previousBlogObj.frontmatter.title
                    }
                    cardDescription={previousBlogObj.frontmatter.description}
                    cardImage={previousBlogObj.frontmatter.image}
                />
            )
        }
    </ul>
    <style>
        img {
            width: 200px;
            max-width: 30vw;
            height: auto;
            float: right;
            padding: 10px 10px 5px 10px;
        }
        ul {
            display: flex;
            padding: 0;
            flex-direction: column;
        }
    </style>
</Layout>
