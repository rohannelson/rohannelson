---
import Layout from '../../layouts/BaseLayout.astro'
import Grid from '../../components/Grid.astro'
import FeatureCard from '../../components/FeatureCard.astro'
import LinkButton from '../../components/LinkButton.astro'
import { emailExcerpt } from '../../components/utils'
const title = 'My Web Projects'
const description = 'A home for my web experiments'
//Auth handled in middleware/index.js
const email = Astro.locals.email
---

<Layout {title} {description}>
	<p>Here are some things that I've made for fun and learning!</p>
	<Grid>
		<FeatureCard
			heading="Board Games App"
			linkObj={{ label: 'Sign in', href: '/sign-in' }}
			icon="puzzle"
		>
			{
				email == 'Guest' && (
					<div slot="links" class="flex gap-3">
						<LinkButton href="/sign-in" label="Sign in" buttonStyle="red" />
						<LinkButton href="/create-account" label="Create Account" buttonStyle="feature" />
					</div>
				)
			}
			{
				email != 'Guest' && (
					<LinkButton
						slot="links"
						href="/projects/games"
						label={`Play as '${emailExcerpt(email, 12)}'`}
					/>
				)
			}
			<p slot="altPath" class="!mt-1 text-white">
				{
					email == 'Guest' && (
						<>
							Or
							<a href="/projects/games" class="font-semibold text-white underline">
								play as a guest
							</a>
							.
						</>
					)
				}
				{
					email != 'Guest' && (
						<>
							Not you?{' '}
							<a class="font-semibold text-white underline" href="/api/auth/sign-out">
								Sign in with another account,
							</a>
							or
							<a class="font-semibold text-white underline" href="api/auth/sign-out?guest=guest">
								play as a guest
							</a>
							.
						</>
					)
				}
			</p>
			<p class="mb-3">
				I made some board games in React, partly for fun, but partly to learn React. Check them out!
			</p>
		</FeatureCard>
	</Grid>
</Layout>
